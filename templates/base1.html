{% extends "base.html" %}
{% block content %}
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}My Portfolio{% endblock %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
</head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background-color: #f8f9fa;
    }

    .hover-shadow:hover {
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      transform: translateY(-3px);
      transition: all 0.3s ease;
    }

    .section-title {
      font-size: 1.8rem;
      font-weight: bold;
      color: #764ba2;
      margin-top: 40px;
      margin-bottom: 25px;
    }

    .card {
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
      transition: 0.3s ease-in-out;
    }

    .card:hover {
      transform: translateY(-5px);
    }

    .profile-img {
      width: 150px;
      height: 150px;
      object-fit: cover;
      border-radius: 50%;
      border: 3px solid #764ba2;
    }

    .lang-toggle {
      position: fixed;
      top: 15px;
      right: 20px;
      z-index: 999;
    }

    #chat-toggle-btn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 999;
  width: 60px;
  height: 60px;
  background-color: #764ba2;
  color: white;
  font-size: 26px;
  border-radius: 50%;
  border: none;
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
}

    #chat-box {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 350px;
      max-height: 500px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      z-index: 1000;
      display: none;
      flex-direction: column;
      overflow: hidden;
    }

    #chat-header {
      background: #764ba2;
      color: white;
      padding: 12px;
      font-weight: bold;
    }

    #chat-body {
      padding: 10px;
      height: 280px;
      overflow-y: auto;
      font-size: 14px;
    }

    #chat-input-area {
      padding: 10px;
      border-top: 1px solid #ddd;
      background-color: #f7f7f7;
    }

    #chat-input-area textarea {
      width: 100%;
      resize: none;
      font-size: 14px;
    }

    #chat-input-area button {
      margin-top: 6px;
    }
  </style>
<body>

  <!-- üåê Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-4">
    <a class="navbar-brand" href="/">My Portfolio</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about#skills">Skills</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about#projects">Projects</a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- üîß Main content -->
  <main class="container py-4">
    {% block content %}{% endblock %}
  </main>

  <!-- üß± Footer -->
  <footer class="bg-dark text-white text-center py-3 mt-5">
    <p class="mb-1">&copy; 2025 Lingyun Huang. All rights reserved.</p>
    <p class="mb-0">
      Contact: <a href="huanglyno.1@gmail.com" class="text-info">huanglyno.1@gmail.com</a>
    </p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
function renderBarChart(canvasId, labels, data, color) {
  new Chart(document.getElementById(canvasId).getContext('2d'), {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        data: data,
        backgroundColor: color,
        borderRadius: 5,
        barThickness: 16
      }]
    },
    options: {
      indexAxis: 'y',
      plugins: {
        legend: { display: false },
        tooltip: {
          callbacks: {
            label: (ctx) => `ÁÜüÁªÉÂ∫¶: ${ctx.parsed.x}%`
          }
        }
      },
      scales: {
        x: {
          max: 100,
          ticks: {
            callback: (val) => val + '%'
          }
        }
      }
    }
  });
}

// üß† AI & Data
renderBarChart("chart-ai",
  ["ML", "DL", "NLP", "Viz", "IR", "Knowledge Rep"],
  [90, 85, 80, 80, 75, 70],
  "#7e57c2"
);

// üîß Engineering
renderBarChart("chart-eng",
  ["Python", "Git/Linux", "Flask/Django", "HTML/CSS/JS", "DB", "Fiddler"],
  [95, 85, 78, 75, 75, 60],
  "#42a5f5"
);

// üï∑Ô∏è Crawling
renderBarChart("chart-crawl",
  ["Scrapy", "Selenium", "XPath", "Requests"],
  [90, 80, 90, 90],
  "#66bb6a"
);
</script>

<!-- Language script -->
<script>
  const translations = {
    en: {
      name: "Lingyun HUANG",
      subtitle: "AI | Machine Learning | NLP | Healthcare",
      current_projects: "üî• Current Projects",
      chatbot_project: "Chatbot for Learning Assistance",
      ed_project: "Emergency Flow Prediction",
      leetcode_project: "Leetcode Practice",
      view_details: "View Details",
      project_experience: "üìå Project Experience",
      project1: "üîß Automatic Testing Framework",
      project2: "üåê Ring Web Extractor",
      project3: "üìä Social Science Database Platform",
      project4: "üßæ Additional Data Collection Projects"
    },
    zh: {
      name: "ÈªÑÂáå‰∫ë",
      subtitle: "‰∫∫Â∑•Êô∫ËÉΩ | Êú∫Âô®Â≠¶‰π† | Ëá™ÁÑ∂ËØ≠Ë®ÄÂ§ÑÁêÜ | ÂåªÁñóÂÅ•Â∫∑",
      current_projects: "üî• ÂΩìÂâçÈ°πÁõÆ",
      chatbot_project: "Â≠¶‰π†ËæÖÂä©ËÅäÂ§©Êú∫Âô®‰∫∫",
      ed_project: "ÊÄ•ËØäÊµÅÈáèÈ¢ÑÊµã‰∏é‰ºòÂåñ",
      leetcode_project: "Leetcode ÁÆóÊ≥ïËÆ≠ÁªÉ",
      view_details: "Êü•ÁúãËØ¶ÊÉÖ",
      project_experience: "üìå È°πÁõÆÁªèÂéÜ",
      project1: "üîß Ëá™Âä®ÂåñÊµãËØïÊ°ÜÊû∂",
      project2: "üåê ÁîµÂïÜÁà¨Ëô´Á≥ªÁªü",
      project3: "üìä Á§æÁßëÊï∞ÊçÆÂ∫ìÂπ≥Âè∞",
      project4: "üßæ ÂÖ∂‰ªñÊï∞ÊçÆÈááÈõÜÈ°πÁõÆ"
    }
  };

  let currentLang = "en";

  function toggleLang() {
    const elements = document.querySelectorAll("[data-i18n]");
    currentLang = currentLang === "en" ? "zh" : "en";
    elements.forEach(el => {
      const key = el.getAttribute("data-i18n");
      el.textContent = translations[currentLang][key] || el.textContent;
    });
  }
</script>
<script>
  function toggleChat() {
    const chatBox = document.getElementById("chat-box");
    chatBox.style.display = (chatBox.style.display === "none" || chatBox.style.display === "") ? "flex" : "none";
  }

  function closeChat() {
    document.getElementById("chat-box").style.display = "none";
  }

  async function sendMessage() {
    const input = document.getElementById("user-input").value.trim();
    const model = document.getElementById("model-select").value;
    const chatBody = document.getElementById("chat-body");

    if (!input) return;

    chatBody.innerHTML += `<p><strong>You:</strong> ${input}</p>`;
    chatBody.innerHTML += `<p><strong>AI (${model}):</strong> <span id="typing">...</span></p>`;
    chatBody.scrollTop = chatBody.scrollHeight;
    document.getElementById("user-input").value = "";

    try {
      const response = await fetch("/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message: input, model: model })
      });

      const data = await response.json();
      document.getElementById("typing").innerText = data.response || "ü§ñ Êä±Ê≠âÔºåÊàëÊöÇÊó∂Êó†Ê≥ïÂõûÁ≠îËøô‰∏™ÈóÆÈ¢ò„ÄÇ";
      chatBody.scrollTop = chatBody.scrollHeight;
    } catch (error) {
      document.getElementById("typing").innerText = "‚ö†Ô∏è Âá∫Áé∞ÈîôËØØÔºåËØ∑Á®çÂêéÈáçËØï„ÄÇ";
    }
  }
</script>
</body>
</html>
